<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Azure (Cognitive) Search # | Azure Developer College</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/trainingdays/assets/css/0.styles.bc728db4.css" as="style"><link rel="preload" href="/trainingdays/assets/js/app.d38bf813.js" as="script"><link rel="preload" href="/trainingdays/assets/js/2.5ff1d4d5.js" as="script"><link rel="preload" href="/trainingdays/assets/js/6.6bc81206.js" as="script"><link rel="prefetch" href="/trainingdays/assets/js/10.e0433817.js"><link rel="prefetch" href="/trainingdays/assets/js/11.cd8c7b17.js"><link rel="prefetch" href="/trainingdays/assets/js/12.12888c30.js"><link rel="prefetch" href="/trainingdays/assets/js/13.873bda65.js"><link rel="prefetch" href="/trainingdays/assets/js/14.1a24ee27.js"><link rel="prefetch" href="/trainingdays/assets/js/15.6fa51cf9.js"><link rel="prefetch" href="/trainingdays/assets/js/16.d5e02596.js"><link rel="prefetch" href="/trainingdays/assets/js/17.fcaa5f26.js"><link rel="prefetch" href="/trainingdays/assets/js/18.f2a21d28.js"><link rel="prefetch" href="/trainingdays/assets/js/19.a350c78d.js"><link rel="prefetch" href="/trainingdays/assets/js/20.bfd694b1.js"><link rel="prefetch" href="/trainingdays/assets/js/21.bed10b37.js"><link rel="prefetch" href="/trainingdays/assets/js/22.860246de.js"><link rel="prefetch" href="/trainingdays/assets/js/23.b225110a.js"><link rel="prefetch" href="/trainingdays/assets/js/24.13b22772.js"><link rel="prefetch" href="/trainingdays/assets/js/25.e0f5a7a3.js"><link rel="prefetch" href="/trainingdays/assets/js/26.c1146b2a.js"><link rel="prefetch" href="/trainingdays/assets/js/27.ab26807b.js"><link rel="prefetch" href="/trainingdays/assets/js/28.ab2698cc.js"><link rel="prefetch" href="/trainingdays/assets/js/29.496ec42d.js"><link rel="prefetch" href="/trainingdays/assets/js/3.b5657a11.js"><link rel="prefetch" href="/trainingdays/assets/js/30.fd15c623.js"><link rel="prefetch" href="/trainingdays/assets/js/31.72ed4ad1.js"><link rel="prefetch" href="/trainingdays/assets/js/32.81e15b13.js"><link rel="prefetch" href="/trainingdays/assets/js/33.f1fcf176.js"><link rel="prefetch" href="/trainingdays/assets/js/34.8432e852.js"><link rel="prefetch" href="/trainingdays/assets/js/35.61413aac.js"><link rel="prefetch" href="/trainingdays/assets/js/36.dc009a95.js"><link rel="prefetch" href="/trainingdays/assets/js/37.88c251fb.js"><link rel="prefetch" href="/trainingdays/assets/js/38.b9f64ed2.js"><link rel="prefetch" href="/trainingdays/assets/js/39.4bf7d432.js"><link rel="prefetch" href="/trainingdays/assets/js/4.316442a1.js"><link rel="prefetch" href="/trainingdays/assets/js/40.a1779f5a.js"><link rel="prefetch" href="/trainingdays/assets/js/41.b4f159db.js"><link rel="prefetch" href="/trainingdays/assets/js/42.096f1aa1.js"><link rel="prefetch" href="/trainingdays/assets/js/43.cf13395f.js"><link rel="prefetch" href="/trainingdays/assets/js/44.92be7e22.js"><link rel="prefetch" href="/trainingdays/assets/js/45.298ad7f7.js"><link rel="prefetch" href="/trainingdays/assets/js/46.4d6179b3.js"><link rel="prefetch" href="/trainingdays/assets/js/47.bc41cef1.js"><link rel="prefetch" href="/trainingdays/assets/js/48.31275a9a.js"><link rel="prefetch" href="/trainingdays/assets/js/49.a2dc55f9.js"><link rel="prefetch" href="/trainingdays/assets/js/5.815c1276.js"><link rel="prefetch" href="/trainingdays/assets/js/50.c6016f95.js"><link rel="prefetch" href="/trainingdays/assets/js/51.0bd2785b.js"><link rel="prefetch" href="/trainingdays/assets/js/52.4e12987f.js"><link rel="prefetch" href="/trainingdays/assets/js/53.fb7850b1.js"><link rel="prefetch" href="/trainingdays/assets/js/54.1f20c333.js"><link rel="prefetch" href="/trainingdays/assets/js/55.d1950d56.js"><link rel="prefetch" href="/trainingdays/assets/js/56.3a6b8119.js"><link rel="prefetch" href="/trainingdays/assets/js/57.3639003b.js"><link rel="prefetch" href="/trainingdays/assets/js/58.091b6b2a.js"><link rel="prefetch" href="/trainingdays/assets/js/59.b1b6f798.js"><link rel="prefetch" href="/trainingdays/assets/js/60.8312cc43.js"><link rel="prefetch" href="/trainingdays/assets/js/61.8077d507.js"><link rel="prefetch" href="/trainingdays/assets/js/62.7099a9ec.js"><link rel="prefetch" href="/trainingdays/assets/js/63.de9324f4.js"><link rel="prefetch" href="/trainingdays/assets/js/64.69b552bd.js"><link rel="prefetch" href="/trainingdays/assets/js/65.7999d6d6.js"><link rel="prefetch" href="/trainingdays/assets/js/66.bd4052c9.js"><link rel="prefetch" href="/trainingdays/assets/js/67.e79e194c.js"><link rel="prefetch" href="/trainingdays/assets/js/68.f8d8015a.js"><link rel="prefetch" href="/trainingdays/assets/js/69.e5994ee8.js"><link rel="prefetch" href="/trainingdays/assets/js/7.60b45c24.js"><link rel="prefetch" href="/trainingdays/assets/js/70.55b1b75a.js"><link rel="prefetch" href="/trainingdays/assets/js/71.eba7950f.js"><link rel="prefetch" href="/trainingdays/assets/js/72.75c0fa4d.js"><link rel="prefetch" href="/trainingdays/assets/js/73.457d78aa.js"><link rel="prefetch" href="/trainingdays/assets/js/74.a278da89.js"><link rel="prefetch" href="/trainingdays/assets/js/75.8f7da85a.js"><link rel="prefetch" href="/trainingdays/assets/js/76.306b2367.js"><link rel="prefetch" href="/trainingdays/assets/js/77.4b93f5b5.js"><link rel="prefetch" href="/trainingdays/assets/js/78.149c6cba.js"><link rel="prefetch" href="/trainingdays/assets/js/79.df492d10.js"><link rel="prefetch" href="/trainingdays/assets/js/8.240e2339.js"><link rel="prefetch" href="/trainingdays/assets/js/80.91573785.js"><link rel="prefetch" href="/trainingdays/assets/js/9.6caa67cc.js">
    <link rel="stylesheet" href="/trainingdays/assets/css/0.styles.bc728db4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/trainingdays/" class="home-link router-link-active"><!----> <span class="site-name">Azure Developer College</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/trainingdays/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/trainingdays/day1/" class="sidebar-link">Day 1 Azure Fundamentals &amp; Infrastructure</a></li><li><a href="/trainingdays/day2/" class="sidebar-link">Day 2 Azure Development</a></li><li><a href="/trainingdays/day3/" aria-current="page" class="sidebar-link">Day 3 Data and AI</a></li><li><a href="/trainingdays/day4/" class="sidebar-link">Day 4 Azure DevOps</a></li><li><a href="/trainingdays/day5/" class="sidebar-link">Day 5 Identity and Architecture</a></li><li><a href="/trainingdays/day6/" class="sidebar-link">Day 6 Containerization</a></li><li><a href="/trainingdays/day7/" class="sidebar-link">Day 7 Kubernetes</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="azure-cognitive-search"><a href="#azure-cognitive-search" class="header-anchor">#</a> Azure (Cognitive) Search</h1> <h2 id="here-is-what-you-will-learn"><a href="#here-is-what-you-will-learn" class="header-anchor">#</a> Here is what you will learn</h2> <ul><li>Create an Azure Search Service in the Portal</li> <li>Add Cognitive Skills to Azure Search</li> <li>Integrate Azure Search in an Node JS application</li> <li>Optional: Create an Azure Cognitive Search index in Python using Jupyter notebooks</li></ul> <h2 id="what-is-azure-cognitive-search"><a href="#what-is-azure-cognitive-search" class="header-anchor">#</a> What is Azure Cognitive Search?</h2> <p>Azure Cognitive Search is a search-as-a-service cloud solution that gives developers APIs and tools for adding a rich search experience over private, heterogeneous content in web, mobile and enterprise applications. Your code or a tool invokes data ingestion (indexing) to create and load an index. Optionally, you can add cognitive skills to apply Artificial Intelligence processes during indexing. Doing so, you can add new information and structures useful for search and other scenarios.</p> <p>Regarding your application, your code issues query requests and handles responses from Azure Search. The search experience is defined in your client using functionality from Azure Cognitive Search, with query execution over a persisted index that you create, own, and store in your service.</p> <p><img src="/trainingdays/assets/img/AzureSearchArchitecture.6723f456.png" alt="Azure Cognitive Search Architecture"></p> <h2 id="what-are-the-features-of-azure-cognitive-search"><a href="#what-are-the-features-of-azure-cognitive-search" class="header-anchor">#</a> What are the Features of Azure Cognitive Search?</h2> <table><thead><tr><th>Core Search</th> <th>Features</th></tr></thead> <tbody><tr><td>Free-form text search</td> <td><a href="https://docs.microsoft.com/en-us/azure/search/search-lucene-query-architecture" target="_blank" rel="noopener noreferrer"><strong>Full-text search</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a primary use case for most search-based apps. Queries can be formulated using a supported syntax. <br><br><a href="https://docs.microsoft.com/en-us/rest/api/searchservice/simple-query-syntax-in-azure-search" target="_blank" rel="noopener noreferrer"><strong>Simple query syntax</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> provides logical operators, phrase search operators, suffix operators, precedence operators.<br><br><a href="https://docs.microsoft.com/en-us/rest/api/searchservice/lucene-query-syntax-in-azure-search" target="_blank" rel="noopener noreferrer"><strong>Lucene query syntax</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> includes all operations in simple syntax, with extensions for fuzzy search, proximity search, term boosting, and regular expressions.</td></tr> <tr><td>Filters and facets</td> <td><a href="https://docs.microsoft.com/en-us/azure/search/search-faceted-navigation" target="_blank" rel="noopener noreferrer"><strong>Faceted navigation</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is enabled through a single query parameter. Azure Cognitive Search returns a faceted navigation structure you can use as the code behind a categories list, for self-directed filtering (for example, to filter catalog items by price-range or brand). <br><br> <a href="https://docs.microsoft.com/en-us/azure/search/search-filters-facets" target="_blank" rel="noopener noreferrer"><strong>Filters</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can be used to incorporate faceted navigation into your application's UI, enhance query formulation, and filter based on user- or developer-specified criteria. Create filters using the OData syntax.</td></tr></tbody></table> <h3 id="facet-filters-in-a-search-app"><a href="#facet-filters-in-a-search-app" class="header-anchor">#</a> Facet Filters in a Search App</h3> <p>Faceted navigation is used for self-directed filtering on query results in a search app, where your application offers UI controls for scoping search to groups of documents (for example, categories or brands), and Azure Cognitive Search provides the data structure to back the experience.</p> <p>In code, a query that specifies all parts of a valid query, including search expressions, facets, filters, scoring profiles– anything used to formulate a request, can look like the following example:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SearchParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token comment">// Add facets</span>
    Facets <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;businessTitle&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>This example builds a request that creates facet navigation based on the business title information.</p> <p><img src="/trainingdays/assets/img/FacetFilter.08491bc0.png" alt="Facet Filters"></p> <p>Facets are dynamic and returned on a query. Search responses bring with them the facet categories used to navigate the results.</p> <p>You can find more details here: <a href="https://docs.microsoft.com/en-us/azure/search/search-filters-facets" target="_blank" rel="noopener noreferrer">Search-Filters-Facets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>In the SCM Application, we are using the Lucene query syntax (<a href="https://docs.microsoft.com/en-us/azure/search/search-query-lucene-examples" target="_blank" rel="noopener noreferrer">Lucene Query Syntax Examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>View the full Azure Cognitive Search Feature list here:
<a href="https://docs.microsoft.com/en-us/azure/search/search-what-is-azure-search#feature-descriptions" target="_blank" rel="noopener noreferrer">Azure Cognitive Search Feature list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="create-an-azure-search-service-in-the-portal"><a href="#create-an-azure-search-service-in-the-portal" class="header-anchor">#</a> Create an Azure Search Service in the Portal</h2> <ol><li><p>Create a new resource group, e.g. <strong>adc-azsearch-db-rg</strong> and add a service of type <strong>Azure Cognitive Search</strong></p></li> <li><p>First, create a <code>Azure Search</code> instance in the Azure Portal</p></li> <li><p>For our purposes, the <code>Free Tier</code> is sufficient</p></li></ol> <p>However, the <code>Free Tier</code> does not support additional replicas, scaling and is only able to index documents with up to 32000 characters/document. If we want to index larger documents, we need to go to a bigger tier (64000 for <code>Basic</code>, 4m for <code>Standard</code> and above).</p> <p><img src="/trainingdays/assets/img/AzureSearchCreate.2537e91c.png" alt="Create Azure Search"></p> <p>View the Details of Creating an Azure Search Service in the Portal:</p> <p><img src="/trainingdays/assets/img/AzureSearchCreateDetails.078a1336.png" alt="Create Azure Search Details"></p> <p>Once provisioned, our service will be reachable via <code>https://xxxxxxx.search.windows.net</code></p> <p>Azure Search <a href="https://docs.microsoft.com/en-us/azure/search/search-indexer-overview" target="_blank" rel="noopener noreferrer">can index<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> data from a variety of sources:</p> <ul><li>Azure SQL Database or SQL Server on an Azure virtual machine</li> <li>Azure Cosmos DB</li> <li>Azure Blob Storage</li> <li>Azure Table Storage</li> <li>Indexing CSV blobs using the Azure Search Blob indexer</li> <li>Indexing JSON blobs with Azure Search Blob indexer</li></ul> <p>In general, you can upload your data to one of the sources and let Azure Search index it from there. You can do this completely through the Azure Portal, use <a href="https://azure.microsoft.com/en-us/features/storage-explorer/" target="_blank" rel="noopener noreferrer">Storage Explorer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or use the API/CLI.</p> <p>In our case, we'll choose a sample dataset called <strong>hotel-sample</strong></p> <ol><li><p>Open your Azure Search instance and go to <code>Import Data</code></p></li> <li><p>Next, we need to define the <code>Data Source</code> and choose <strong>Samples</strong> and select <code>hotels-sample</code> dataset</p></li></ol> <p><img src="/trainingdays/assets/img/hotels_sample_dataset.294e5b7e.png" alt="Choose hotels sample"></p> <ol start="3"><li><p>We'll skip <code>Cognitive Search</code> for this example.</p></li> <li><p>Now let's proceed to creating an index. Minimally, an index requires a name and a fields collection; one of the fields should be marked as the <strong>document key</strong> to uniquely identify each document. Additionally, you can specify language analyzers or suggesters (<em>type-as-you-go</em> services), if you want autocomplete or suggested queries.</p></li></ol> <p>Fields have data types and attributes. The check boxes above the list are <strong>index attributes</strong>, controlling how the field is used.</p> <ul><li><strong>Retrievable</strong> means that it shows up in search results list. You can mark individual fields as off limits for search results by clearing this checkbox, for example for fields used only in filter expressions or <strong>security-related</strong> fields.</li> <li><strong>Key</strong> is the unique document identifier. It's always a string, and it is required.</li> <li><strong>Filterable</strong>, <strong>Sortable</strong>, and <strong>Facetable</strong> determine whether fields are used in a filter, sort, or faceted navigation structure.</li> <li><strong>Searchable</strong> means that a field is included in full text search. Strings are searchable. Numeric fields and Boolean fields are often marked as not searchable.</li></ul> <p>Storage requirements do not vary as a result of your selection. For example, if you set the <strong>Retrievable</strong> attribute on multiple fields, storage requirements do not rise.</p> <p>By default, the wizard scans the data source for unique identifiers as the basis for the key field. <em>Strings</em> are attributed as <strong>Retrievable</strong> and <strong>Searchable</strong>. <em>Integers</em> are attributed as <strong>Retrievable</strong>, <strong>Filterable</strong>, <strong>Sortable</strong>, and <strong>Facetable</strong>.</p> <ol><li><p><strong>Accept</strong> the <em>defaults</em>.</p> <p>If you rerun the wizard a second time using an existing hotels data source, the index won't be configured with default attributes. You'll have to manually select attributes on future imports.</p> <p><img src="/trainingdays/assets/img/hotels_index.5bb7fc24.png" alt="Generated hotels index"></p></li> <li><p><strong>Continue</strong> to the next page.</p></li></ol> <p>Still in the <strong>Import data</strong> wizard, click <strong>Indexer</strong> &gt; <strong>Name</strong>, and type a name for the indexer.</p> <p>This object defines an executable process. You could put it on recurring schedule, but for now use the default option to run the indexer once, immediately.</p> <p>Click <strong>Submit</strong> to create and simultaneously run the indexer.</p> <p><img src="/trainingdays/assets/img/CreateIndexer.9b2dc96a.png" alt="hotels indexer"></p> <ol start="5"><li>After a minute or two, our Indexer will have indexed the hotel dataset and we should be able to query them.</li></ol> <h2 id="querying-content"><a href="#querying-content" class="header-anchor">#</a> Querying Content</h2> <p>Open the Search Explorer in the Azure Portal, copy the queries (see below) and get familiar with the results of the queries:</p> <h3 id="simple-query-with-top-n-results"><a href="#simple-query-with-top-n-results" class="header-anchor">#</a> Simple query with top N results</h3> <h4 id="string-query-search-spa"><a href="#string-query-search-spa" class="header-anchor">#</a> String Query: <code>search=spa</code></h4> <ul><li><p>The <strong>search</strong> parameter is used to input a keyword search for full text search, in this case, returning hotel data for those containing <em>spa</em> in any searchable field in the document.</p></li> <li><p><strong>Search explorer</strong> returns results. You see that results are returned in <strong>OData</strong> notation making them easily readable by any language/other service.</p></li> <li><p>Documents are composed of all fields marked as &quot;retrievable&quot; in the index. To view index attributes in the portal, click <em>hotels-sample</em> in the <strong>Indexes</strong> list.</p></li></ul> <p><img src="/trainingdays/assets/img/SimpleQuery.9976795b.png" alt="String Query"></p> <h4 id="parameterized-query-search-spa-count-true-top-10"><a href="#parameterized-query-search-spa-count-true-top-10" class="header-anchor">#</a> Parameterized Query: <code>search=spa&amp;$count=true&amp;$top=10</code></h4> <ul><li><p>The <strong>&amp;</strong> symbol is used to append search parameters, which can be specified in any order.</p></li> <li><p>The <strong>$count=true</strong> parameter returns the total count of all documents <strong>available/found</strong> in the Azure Search index - not <strong>returned</strong>. You can verify filter queries by monitoring changes reported by <strong>$count=true</strong>. Smaller counts indicate your filter is working.</p></li> <li><p>The <strong>$top=10</strong> returns the highest ranked 10 documents out of the total (<strong>$count</strong>). By default, Azure Cognitive Search returns the first 50 best matches. You can increase or decrease the amount via <strong>$top</strong> parameter.</p></li></ul> <p><img src="/trainingdays/assets/img/ParameterizedQuery.914fccfb.png" alt="Parameterized Query"></p> <h3 id="filter-the-query"><a href="#filter-the-query" class="header-anchor">#</a> <a name="filter-query"></a> Filter the query</h3> <p>Filters are included in search requests when you append the <strong>$filter</strong> parameter.</p> <h4 id="filtered-query-search-beach-filter-rating-gt-4"><a href="#filtered-query-search-beach-filter-rating-gt-4" class="header-anchor">#</a> Filtered Query: <code>search=beach&amp;$filter=Rating gt 4</code></h4> <ul><li><p>The <strong>$filter</strong> parameter returns results matching the criteria you provided. In this case: <em>ratings greater than 4</em>.</p></li> <li><p>Filter syntax is an OData expression. For more information, see <a href="https://docs.microsoft.com/rest/api/searchservice/odata-expression-syntax-for-azure-search" target="_blank" rel="noopener noreferrer">Filter OData syntax<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></li></ul> <p><img src="/trainingdays/assets/img/FilteredQuery.30799f4b.png" alt="Filtered Query"></p> <h4 id="linguistic-analysis-query-search-beaches-highlight-description"><a href="#linguistic-analysis-query-search-beaches-highlight-description" class="header-anchor">#</a> Linguistic Analysis Query: <code>search=beaches&amp;highlight=Description</code></h4> <ul><li>Full text search recognizes basic variations in word forms. In this case, search results contain highlighted text for &quot;beach&quot;, for hotels that have that word in their searchable fields, in response to a keyword search on &quot;beaches&quot;. Different forms of the same word can appear in results because of linguistic analysis.</li></ul> <blockquote><p>Highlighting works by inserting HTML tags ```<em></em>´´´. You have to add the corresponding CSS (or functionality), to handle the highlighting in your application.</p></blockquote> <ul><li>Azure Cognitive Search supports 56 analyzers from both Lucene and Microsoft (including the same that are used in Office 365). The default used by Azure Cognitive Search is the standard Lucene analyzer.</li></ul> <p><img src="/trainingdays/assets/img/LinguisticAnalysisQuery.8b7408d0.png" alt="Linguistic Analysis Query"></p> <h3 id="try-fuzzy-search"><a href="#try-fuzzy-search" class="header-anchor">#</a> Try fuzzy search</h3> <p>By default, misspelled query terms, like <em>seatle</em> for &quot;Seattle&quot;, fail to return matches in a typical search. The following example returns no results.</p> <h4 id="example-misspelled-term-unhandled-search-seatle"><a href="#example-misspelled-term-unhandled-search-seatle" class="header-anchor">#</a> Example (misspelled term, unhandled): <code>search=seatle</code></h4> <p>To handle misspellings, you can use fuzzy search. Fuzzy search is enabled when you use the full Lucene query syntax, which occurs when you do two things: set <strong>queryType=full</strong> on the query, and append the <strong>~</strong> to the search string.</p> <p><img src="/trainingdays/assets/img/FuzzySearchunhandeled.08e8e783.png" alt="Fuzzy Search Unhandeled"></p> <h4 id="example-misspelled-term-handled-search-seatle-querytype-full"><a href="#example-misspelled-term-handled-search-seatle-querytype-full" class="header-anchor">#</a> Example (misspelled term, handled): <code>search=seatle~&amp;queryType=full</code></h4> <p>This example now returns documents that include matches on &quot;Seattle&quot;.</p> <p><img src="/trainingdays/assets/img/FuzzySearchHandeled.bcdcd0e9.png" alt="Fuzzy Search Handeled"></p> <p>When <strong>queryType</strong> is unspecified, the default <strong>simple query parser</strong> is used. The <strong>simple query parser</strong> is faster, but if you require fuzzy search, regular expressions, proximity search or other advanced query types, you will need the full syntax.</p> <h1 id="add-cognitive-skills-to-azure-search-to-index-unstructured-content-e-g-images-audio-etc"><a href="#add-cognitive-skills-to-azure-search-to-index-unstructured-content-e-g-images-audio-etc" class="header-anchor">#</a> Add Cognitive Skills to Azure Search - to index unstructured content (e.g. images, audio, etc.)</h1> <p><a href="https://docs.microsoft.com/en-us/azure/search/cognitive-search-concept-intro" target="_blank" rel="noopener noreferrer">Azure Cognitive Search<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> allows us to also index unstructured data. More precisely, it add capabilities for data extraction, natural language processing (NLP), and image processing to Azure Search indexing pipeline (for more see <a href="https://docs.microsoft.com/en-us/azure/search/cognitive-search-concept-intro#key-features-and-concepts" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). In Azure Cognitive Search, a skillset is responsible for the pipeline of the data and consists of multiple skills. Some skills have been pre-included, but it is also possible for us to write our own skills.</p> <p><a href="https://docs.microsoft.com/en-us/azure/search/cognitive-search-quickstart-blob" target="_blank" rel="noopener noreferrer">Azure Cognitive Search<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Let's see it in action. As before, let's choose a sample dataset and choose the SQL DB <code>realestate-us-sample</code>. Go to the Azure Search Service an click on <strong>Import Data</strong>.</p> <p><img src="/trainingdays/assets/img/RealestateDataset.180677dd.png" alt="Realestate Dataset"></p> <p>Once we're done, we'll repeat the steps from before, <code>Import Dataset</code>, walk through the wizard, but this time, we'll configure the <code>Cognitive Search</code> part in the second tab.</p> <p>So, we need to define the skillset. In our case, we'll enable all features under <strong>Add enrichments</strong>):</p> <p><img src="/trainingdays/assets/img/EnrichCognitiveSkills.dbb03aaa.png" alt="Defining the skillset"></p> <p><strong>Accept</strong> the <em>defaults</em> of the Index. Once we have finished the next two tabs (Hit <strong>Submit</strong> to run the indexer), Azure Cognitive Search will start indexing our data (this will take a bit longer, as it needs to run image recognition, OCR, etc. on the files).</p> <p><img src="/trainingdays/assets/img/IndexRealestate.8e9f3e33.png" alt="Index Realestate"></p> <p>When you select the Indexes Tab on the Overview Page (in the Azure Portal) and select the Realestate Index, you can use the default query and will see (as shown in the following JSON) that the cognitive skills are enabled and that the Translate Skill has a result:</p> <p><img src="/trainingdays/assets/img/RealestateQuery.147c8013.png" alt="Realestate Cognitive Search"></p> <p><img src="/trainingdays/assets/img/RealestateTranslate.f37e9831.png" alt="Realestate Cogntitive Skils"></p> <ul><li><a href="https://docs.microsoft.com/en-us/rest/api/searchservice/simple-query-syntax-in-azure-search" target="_blank" rel="noopener noreferrer">Simple Query Syntax<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.microsoft.com/en-us/rest/api/searchservice/lucene-query-syntax-in-azure-search" target="_blank" rel="noopener noreferrer">Lucene Query Syntax<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="using-the-api"><a href="#using-the-api" class="header-anchor">#</a> Using the API</h2> <p>We've been lazy and did everything through the portal - obviously not the way we want to work in the real world. Especially data ingestion and search should (and most likely needs) to be performed through the API:</p> <ul><li><a href="https://docs.microsoft.com/en-us/azure/search/search-create-index-rest-api" target="_blank" rel="noopener noreferrer">Create an index<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.microsoft.com/en-us/azure/search/search-import-data-rest-api" target="_blank" rel="noopener noreferrer">Import Data<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.microsoft.com/en-us/azure/search/search-query-rest-api" target="_blank" rel="noopener noreferrer">Search<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h1 id="integrate-azure-search-in-an-node-js-application"><a href="#integrate-azure-search-in-an-node-js-application" class="header-anchor">#</a> Integrate Azure Search in an Node JS Application</h1> <p>Now let's jump into code. We will create a Node.js application that that creates, loads, and queries an Azure Cognitive Search index. This article demonstrates how to create the application step-by-step.</p> <h2 id="set-up-your-environment"><a href="#set-up-your-environment" class="header-anchor">#</a> Set up your environment</h2> <p>Begin by opening the Cloud Shell in the Browser, a Bash console, Powershell console or other environment in which you've installed Node.js.</p> <ol><li><p>Create a development directory, giving it the name <code>adv-search</code> :</p> <div class="language-bash extra-class"><pre class="language-bash"><code>md adv-search
<span class="token builtin class-name">cd</span> adv-search
<span class="token function">git</span> clone https://github.com/Azure-Samples/azure-search-javascript-samples.git
<span class="token builtin class-name">cd</span> azure-search-javascript-samples/quickstart/REST
code <span class="token builtin class-name">.</span>
</code></pre></div></li> <li><p>Insert your search service data in the file <strong>azure_search_config.json</strong>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;serviceName&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[SEARCH_SERVICE_NAME]&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;adminKey&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[SEARCH_SERVICE_ADMIN_KEY]&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;queryKey&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[SEARCH_SERVICE_QUERY_KEY]&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;indexName&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;hotels-quickstart&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Replace the <code>[SEARCH_SERVICE_NAME]</code> value with the name of your search service. Replace <code>[SEARCH_SERVICE_ADMIN_KEY]</code> and <code>[SEARCH_SERVICE_QUERY_KEY]</code> with the key values you recorded earlier.<br>
If your endpoint URL were https://mydemo.search.windows.net, your service name would be <strong>mydemo</strong>.
<img src="/trainingdays/assets/img/SearchUrl.fe22eedb.png" alt="Search URL">
In <strong>Settings &gt; Keys</strong>, get the primary admin key for full rights on the service.</p> <blockquote><p>There are two interchangeable admin keys, provided for business continuity in case you need to roll one over. You can use either the primary or secondary key on requests for adding, modifying, and deleting objects.</p></blockquote> <p><img src="/trainingdays/assets/img/SearchKey.69573493.png" alt="Search Key"></p> <p>⚠ Get the query key as well. It's a best practice to issue query requests with read-only access. Use the <strong>key</strong> underneath the <em>Manage query keys</em> (e.g. <em>C4DD...</em>)</p></li></ol> <h2 id="important-parts-of-the-quickstart-application"><a href="#important-parts-of-the-quickstart-application" class="header-anchor">#</a> Important Parts of the Quickstart Application</h2> <p>Find the file <strong>hotels_quickstart_index.json</strong>. This file defines how Azure Cognitive Search works with the documents you'll be loading in the next step. Each field will be identified by a <code>name</code> and has a specified <code>type</code>. Each field also has a series of index attributes that specify whether Azure Cognitive Search can <em>search</em>, <em>filter</em>, <em>sort</em>, and <em>facet</em> upon the field.</p> <blockquote><p>Most of the fields are simple data types, but some, like <code>AddressType</code> are complex types that allow you to create rich data structures in your index. You can read more about <a href="https://docs.microsoft.com/rest/api/searchservice/supported-data-types" target="_blank" rel="noopener noreferrer">supported data types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://docs.microsoft.com/azure/search/search-what-is-an-index#index-attributes" target="_blank" rel="noopener noreferrer">index attributes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <p>Have a look at the <strong>hotels_quickstart_index.json</strong> and get familiar with its setup/content.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hotels-quickstart&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HotelId&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HotelName&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Description&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;en.lucene&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Description_fr&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fr.lucene&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Category&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Tags&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Collection(Edm.String)&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ParkingIncluded&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.Boolean&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LastRenovationDate&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.DateTimeOffset&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Rating&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.Double&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Address&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.ComplexType&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;StreetAddress&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;City&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;StateProvince&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PostalCode&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Country&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Edm.String&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;searchable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;filterable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;sortable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;facetable&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;suggesters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sg&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;searchMode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;analyzingInfixMatching&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sourceFields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;HotelName&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now, have a look at the file <strong>AzureSearchClient.js</strong> and take your time to understand what happens here. You will find methods to check, if an index exists, to create and delete an index as well as methods to add data to the index (<code>postDataAsync</code>) and - of course - query data (<code>queryAsync</code>).</p> <blockquote><p>If you have any questions regarding the code, feel free to reach out to one of the proctors.</p></blockquote> <h2 id="prepare-and-run-the-sample"><a href="#prepare-and-run-the-sample" class="header-anchor">#</a> Prepare and run the sample</h2> <p>Use a terminal window for the following commands.</p> <ol><li>Navigate to the source code folder <em>azure-search-javascript-samples/quickstart</em>.</li> <li>Install the packages for the sample with <code>npm install</code>.  This command will download the packages upon which the code depends.</li></ol> <p>Now back in Visual Studio Code, set a breakpoint in method <code>doQueriesAsync</code> (in <strong>index.js</strong> - the place where queries are sent to Azure Search and the corresponding response will be readable) and hit <strong>F5</strong> (if VS Code asks you, select <em>Node.JS App</em> as your environment).</p> <p>You should see a series of messages describing the actions being taken by the program and after some time, your breakpoint will be hit. Have a look at the <code>body</code> property in the method mentioned above...there you see the OData response from Azure Search.</p> <p>If you want to see more detail of the requests, you can uncomment the <a href="https://github.com/Azure-Samples/azure-search-javascript-samples/blob/master/quickstart/AzureSearchClient.js#L21-L27" target="_blank" rel="noopener noreferrer">lines at the beginning of the <code>AzureSearchClient.request()</code> method<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in <strong>AzureSearchClient.js</strong>.</p> <p><img src="/trainingdays/assets/img/resultappnodejsazuresearch.ee02b838.png" alt="Run the node.js App with Azure Search"></p> <h1 id="house-keeping-lab-cleanup"><a href="#house-keeping-lab-cleanup" class="header-anchor">#</a> House Keeping: Lab Cleanup</h1> <p>Remove the sample resource group.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ az group delete -n adc-azsearch-db-rg
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azuredevcollege/trainingdays/edit/master/day3/challenges/challenge-3.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/trainingdays/assets/js/app.d38bf813.js" defer></script><script src="/trainingdays/assets/js/2.5ff1d4d5.js" defer></script><script src="/trainingdays/assets/js/6.6bc81206.js" defer></script>
  </body>
</html>
